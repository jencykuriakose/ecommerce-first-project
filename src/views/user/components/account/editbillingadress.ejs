<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Edit Address</title>
</head>
<body>

<h2>Edit Address</h2>

<form id="editAddressForm">
  <div>
    <label for="fullName">Full Name:</label><br>
    <input type="text" id="fullName" name="fullName" required><br>
  </div>
  <div>
    <label for="address">Address:</label><br>
    <textarea id="address" name="address" required></textarea><br>
  </div>
  <div>
    <label for="city">City:</label><br>
    <input type="text" id="city" name="city" required><br>
  </div>
  <div>
    <label for="zipCode">Zip Code:</label><br>
    <input type="text" id="zipCode" name="zipCode" required><br>
  </div>
  <div>
    <label for="country">Country:</label><br>
    <input type="text" id="country" name="country" required><br>
  </div>
  <div>
    <button type="submit">Update Address</button>
  </div>
</form>

<script>
document.getElementById('editAddressForm').addEventListener('submit', function(event) {
  event.preventDefault(); // Prevent form submission
  
  // Get form data
  const formData = new FormData(this);
  
  // Convert form data to JSON
  const addressData = {};
  formData.forEach((value, key) => {
    addressData[key] = value;
  });
  
  // Send data to server for updating address
  fetch('/api/update-address', {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(addressData)
  })
  .then(response => {
    if (response.ok) {
      return response.json();
    }
    throw new Error('Failed to update address');
  })
  .then(data => {
    alert('Address updated successfully');
    // Optionally, redirect the user to another page
    window.location.href = '/profile';
  })
  .catch(error => {
    console.error('Error updating address:', error.message);
    alert('Failed to update address. Please try again later.');
  });
});
</script>

</body>
</html>
